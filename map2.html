<!DOCTYPE html>
<html>
  <head>
    <title>Battery Test</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
     
    </style>
    
  </head>
<body>
<div>
    <h1>

        Battery API
    </h1>
    <section >
        <p> Demo of Battery API</p>
        <p>Battery level is <b id="battery-level"></b></p>
        <p>Battery status is <b id="charging-status"></b><b>charging</b></p>
        <p>Battery will be fully charged in <b id="battery-charged"></b> minutes.</p>
        <p>Battery will be discharged in <b id="battery-discharged"></b> minutes.</p>
    </section>
</div>
<script>
    var battery = navigator.battery || navigator.webkitBattery || navigator.mozBattery || navigator.msBattery;

if (battery) {
// battery API supported
}
    (function () {
        let batterySupported = document.getElementById("battery-supported"),
            batteryLevel = document.getElementById("battery-level"),
            chargingStatus = document.getElementById("charging-status"),
            batteryCharged = document.getElementById("battery-charged"),
            batteryDischarged = document.getElementById("battery-discharged");

        let success = function (battery) {
            if (battery) {
                function setStatus () {
                    console.log("Set status");
                    batteryLevel.innerHTML = Math.round(battery.level * 100) + "%";
                    chargingStatus.innerHTML = (battery.charging)? "" : "not ";
                    batteryCharged.innerHTML = (battery.chargingTime == "infinity")? "Infinity" : parseInt(battery.chargingTime / 60, 10);
                    batteryDischarged.innerHTML = (battery.dischargingTime == "infinity")? "Infinity" : parseInt(battery.dischargingTime / 60, 10);
                }
                setStatus();

                battery.addEventListener("levelchange", setStatus, false);
                battery.addEventListener("chargingchange", setStatus, false);
                battery.addEventListener("chargingtimechange", setStatus, false);
                battery.addEventListener("dischargingtimechange", setStatus, false);
                } else {
                throw new Error('Battery API not supported')
                }
        };

        let noGood = function (error) {
            batterySupported.innerHTML = error.message;
        };

        navigator.getBattery()
        .then(success)
        .catch(noGood)
    })();
</script>

</body>
</html>
